# é¡¹ç›®ç®€ä»‹

ç»è¿‡æµ‹è¯•ï¼Œæ­¤é¡¹ç›®çš„ï¼ˆmasteråˆ†æ”¯ï¼‰è¿è¡Œè¦æ±‚æ˜¯ `>= Python 3.8` ï¼Œæ¨èä½¿ç”¨ `Python 3.9`ã€‚

> **ğŸ’¡æç¤º** ç”±äº Flask ä¸­ä½¿ç”¨çš„ Werkzeug æ¨¡å—æ›´æ–°ï¼ŒFlask å®˜æ–¹å¹¶æœªè¿›è¡Œæ›´æ–°ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå‡ºç° ImportError ã€‚
> æ­¤ç±»æƒ…å†µçš„å‡ºç°å¯ä»¥é€šè¿‡æ­£ç¡®å®‰è£… `requirements.txt` ä¸­çš„æ¨¡å—ï¼ˆä»¥åŠå…¶å¯¹åº”ç‰ˆæœ¬ï¼‰è§£å†³ã€‚

# é¡¹ç›®ç»“æ„

## åº”ç”¨ç»“æ„

```åº”ç”¨ç»“æ„
Pear Admin Flask
â”œâ”€applications  # åº”ç”¨
â”‚  â”œâ”€extensions  # æ³¨å†Œæ’ä»¶
â”‚  â”œâ”€models  # æ•°æ®æ¨¡å‹
â”‚  â”œâ”€static  # é™æ€èµ„æºæ–‡ä»¶
â”‚  â”œâ”€templates  # é™æ€æ¨¡æ¿æ–‡ä»¶
â”‚  â””â”€views  # è§†å›¾éƒ¨åˆ†
â”‚     â”œâ”€admin  # åå°ç®¡ç†è§†å›¾æ¨¡å—
â”‚     â””â”€index  # å‰å°è§†å›¾æ¨¡å—
â”œâ”€docs  # æ–‡æ¡£è¯´æ˜
â”œâ”€migrations  # è¿ç§»æ–‡ä»¶è®°å½•
â”œâ”€requirement  # ä¾èµ–æ–‡ä»¶
â””â”€.env # é¡¹ç›®çš„é…ç½®æ–‡ä»¶
```

## èµ„æºç»“æ„

```èµ„æºç»“æ„
Pear Admin Flask
â”œâ”€static    # é¡¹ç›®è®¾å®šçš„ Flask èµ„æºæ–‡ä»¶å¤¹
â”‚  â”œâ”€admin    # pear admin flask çš„åç«¯èµ„æºæ–‡ä»¶ï¼ˆä¸ pear admin layui åŒæ­¥ï¼‰
â”‚  â”œâ”€index    # pear admin flask çš„å‰ç«¯èµ„æºæ–‡ä»¶
â”‚  â””â”€upload     # ç”¨æˆ·ä¸Šä¼ ä¿å­˜ç›®å½•
â””â”€templates # é¡¹ç›®è®¾å®šçš„ Flask æ¨¡æ¿æ–‡ä»¶å¤¹
  â”œâ”€admin   # pear admin flask çš„åç«¯ç®¡ç†é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€admin_log    # æ—¥å¿—é¡µé¢
  â”‚  â”œâ”€common       # åŸºæœ¬æ¨¡æ¿é¡µé¢ï¼ˆå¤´éƒ¨æ¨¡æ¿ä¸é¡µè„šæ¨¡æ¿ï¼‰
  â”‚  â”œâ”€console      # ç³»ç»Ÿç›‘æ§é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€dept         # éƒ¨é—¨ç®¡ç†é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€dict         # æ•°æ®è‡ªåŠ¨é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€mail         # é‚®ä»¶ç®¡ç†é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€photo        # å›¾ç‰‡ä¸Šä¼ é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€power        # æƒé™ï¼ˆèœå•ï¼‰ç®¡ç†é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€role         # è§’è‰²ç®¡ç†é¡µé¢æ¨¡æ¿
  â”‚  â”œâ”€task         # ä»»åŠ¡è®¾ç½®é¡µé¢æ¨¡æ¿
  â”‚  â””â”€user         # ç”¨æˆ·ç®¡ç†é¡µé¢æ¨¡æ¿
  â”œâ”€errors  # é”™è¯¯é¡µé¢æ¨¡æ¿
  â””â”€index   # ä¸»é¡µæ¨¡æ¿
```

# é¡¹ç›®å®‰è£…

## ä¿®æ”¹é…ç½®

> **ğŸ’¡æç¤º** é…ç½®æ–‡ä»¶ä½äº  `applications/config.py` ï¼Œæ‰“å¼€é…ç½®æ–‡ä»¶çœ‹åˆ°çš„æ˜¯ä½äº `BaseConfig` ç±»ä¸‹çš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ç¼–å†™è‡ªå·±çš„é…ç½®ç±»å¹¶ç»§æ‰¿ `BaseConfig` ç±»ã€‚
é¡¹ç›®å¯åŠ¨æ—¶ï¼Œä¼šè°ƒç”¨ `applications/__init__.py` ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸­åŠ è½½äº†ç¨‹åºçš„é…ç½®ï¼Œæ‰€ä»¥åœ¨æ‚¨ç¼–å†™äº†è‡ªå·±çš„ç±»åä¸è¦å¿˜è®°åœ¨æ–‡ä»¶ `applications/__init__.py` ä¸­ä¿®æ”¹ä½¿ç”¨çš„é…ç½®ç±»ã€‚

> **âš ï¸æ³¨æ„** é…ç½®æ–‡ä»¶ä¸­å¯¹äºæ•°æ®åº“çš„é…ç½®æœ‰æ‰€æ›´æ”¹ï¼Œè¯·æŸ¥çœ‹ä»£ç ä¸­çš„æ³¨é‡Šä¿®æ”¹é…ç½®ã€‚

```python
# éƒ¨åˆ†é…ç½®ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤º

# éªŒè¯å¯†é’¥ï¼ˆâš ï¸ ä¸€å®šè¦è®°å¾—ä¿®æ”¹ âš ï¸ï¼‰
SECRET_KEY = "pear-system-flask"

# æ•°æ®åº“çš„é…ç½®ä¿¡æ¯
SQLALCHEMY_DATABASE_URI = 'sqlite:///../pear.db'

# é»˜è®¤æ—¥å¿—ç­‰çº§
LOG_LEVEL = logging.WARN

# flask-mailé…ç½®
MAIL_SERVER = 'smtp.qq.com'
MAIL_USE_TLS = False
MAIL_USE_SSL = True
MAIL_PORT = 465
MAIL_USERNAME = '123@qq.com'
MAIL_PASSWORD = 'XXXXX'  # ç”Ÿæˆçš„æˆæƒç 
MAIL_DEFAULT_SENDER = MAIL_USERNAME
```


## è™šæ‹Ÿç¯å¢ƒå®‰è£…é¡¹ç›®ï¼ˆæ¨èï¼‰

> **ğŸ’¡æç¤º** ä¸ºäº†ä¿è¯é¡¹ç›®æ‰€ä¾èµ–çš„åº“ä¸å½±å“å…¶ä»–éƒ¨ç½²åœ¨åŒä¸€ä¸»æœºä¸Šçš„é¡¹ç›®ï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨è™šæ‹Ÿç¯å¢ƒå®‰è£…ã€‚

```bash
python -m venv venv

# è¿›å…¥è™šæ‹Ÿç¯å¢ƒä¸‹
venv\Scripts\activate.bat  # Windows æç¤ºå‘½ä»¤ç¬¦
venv\Scripts\Activate.ps1  # Windows Powershell
. venv/bin/activate  # Linux

# ä½¿ç”¨ pip å®‰è£…
pip install -r requirements.txt
```

## ç›´æ¥å®‰è£…é¡¹ç›®

```bash
# ä½¿ç”¨ pip å®‰è£…
pip install -r requirements.txt
# åŒæ—¶ä½ å¯ä»¥é€‰æ‹©ä»¥æ¨¡å—çš„æ–¹å¼è°ƒç”¨ pip
python -m pip install -r requirements.txt
```

# è¿è¡Œé¡¹ç›®

+ ä¸€èˆ¬æƒ…å†µè¿è¡Œé¡¹ç›®

```bash
# åˆå§‹åŒ–æ•°æ®åº“
flask db init
flask db migrate
flask db upgrade
flask admin init

# è¿è¡Œé¡¹ç›®
flask --app app.py run -h 0.0.0.0 -p 8000 --debug

# æˆ–è€…ç›´æ¥è°ƒç”¨ app.py
python app.py
```

## é¡¹ç›®åˆå§‹ç”¨æˆ·ä»¥åŠå…¶å¯†ç 

é»˜è®¤ç”¨æˆ·ä¸º `admin` ï¼Œå¯†ç é»˜è®¤ä¸º `123456` ã€‚




